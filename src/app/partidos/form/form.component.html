<div class="container">
    <div class="text-center mt-4">
        <h2>Partidos</h2>
    </div>

    <form [formGroup]="formulario" (ngSubmit)="enviar()">
       
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="jornada" class="form-label">Jornada</label>
                    <select
                      (change)="onChangeJornada($event)"
                      formControlName="jornada"
                      class="form-control form-select" 
                      id="jornada">
                      <option *ngFor="let jornada of jornadas" value="{{ jornada.id }}">
                          {{ jornada.fecha | date: 'dd/MM/yyyy' }}
                      </option>
                    </select>  
                  </div>
                  <div *ngIf="formdata['jornada'].touched && formdata['jornada'].invalid" class="alert alert-danger">
                      <div *ngIf="formdata['jornada'].errors && formdata['jornada'].errors['required']">
                          Número de Jornada es requerido
                      </div>
                  </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="orden" class="form-label">Orden</label>
                    <input 
                      formControlName="orden"
                      type="number" 
                      class="form-control" 
                      id="orden">
                  </div>
                  <div *ngIf="formdata['orden'].touched && formdata['orden'].invalid" class="alert alert-danger">
                      <div *ngIf="formdata['orden'].errors && formdata['orden'].errors['required']">
                          Número de orden de Jornada es requerido
                      </div>
                  </div>
            </div>
        </div>

        <input 
            type="hidden" 
            formControlName="fecha"
            id="fecha"
            />

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="idlocal" class="form-label">Local</label>
                    <select
                      formControlName="idlocal"
                      class="form-control form-select" 
                      id="idlocal">
                      <option *ngFor="let equipo of equipos" value="{{ equipo.id }}">
                          {{ equipo.nombre }}
                      </option>
                    </select>  
                </div>
                <div *ngIf="formdata['idlocal'].touched && formdata['idlocal'].invalid" class="alert alert-danger">
                    <div *ngIf="formdata['idlocal'].errors && formdata['idlocal'].errors['required']">
                        El equipo local es requerido
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="mb-3">
                    <label for="idvisitante" class="form-label">Visitante</label>
                    <select
                      formControlName="idvisitante"
                      class="form-control form-select" 
                      id="idvisitante">
                      <option *ngFor="let equipo of equipos" value="{{ equipo.id }}">
                          {{ equipo.nombre }}
                      </option>
                    </select>  
                </div>
                <div *ngIf="formdata['idvisitante'].touched && formdata['idvisitante'].invalid" class="alert alert-danger">
                    <div *ngIf="formdata['idvisitante'].errors && formdata['idvisitante'].errors['required']">
                        El equipo visitante es requerido
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="goleslocal" class="form-label">Goles local</label>
                    <input 
                      formControlName="goleslocal"
                      type="number" 
                      class="form-control" 
                      id="goleslocal">
                  </div>
                  <div *ngIf="formdata['goleslocal'].touched && formdata['goleslocal'].invalid" class="alert alert-danger">
                      <div *ngIf="formdata['goleslocal'].errors && formdata['goleslocal'].errors['required']">
                          Número de Goles es requerido
                      </div>
                  </div>
            </div>

            <div class="col-md-6">
                <div class="mb-3">
                    <label for="golesvisitante" class="form-label">Goles visitante</label>
                    <input 
                      formControlName="golesvisitante"
                      type="number" 
                      class="form-control" 
                      id="golesvisitante">
                  </div>
                  <div *ngIf="formdata['golesvisitante'].touched && formdata['golesvisitante'].invalid" class="alert alert-danger">
                      <div *ngIf="formdata['golesvisitante'].errors && formdata['golesvisitante'].errors['required']">
                          Número de Goles es requerido
                      </div>
                  </div>
            </div>
        </div>

        <button class="btn btn-primary btn-sm" [disabled]="!formulario.valid">Guardar</button>
        <button class="btn btn-secondary btn-sm ms-3" type="button" routerLink="/partidos/list">Volver</button>
    </form>    
    <div *ngIf="errorAPI" class="text-danger mt-3 mb-3">
        {{ errorMensaje }}
    </div>
</div>